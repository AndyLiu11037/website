import React from 'react';
import anime from 'animejs';
import {hot} from "react-hot-loader";
import { render } from 'react-dom';

class Intro extends React.Component {
    constructor(props){
		super(props);
		this.state = {
			renderIntro: true,
		};
        this.interval = null;
        
	}
    componentDidMount(){
        this.interval = setTimeout(() => this.setState({renderIntro: false}),2500);
        var pathEls = document.querySelectorAll('path');
        for (var i = 0; i < pathEls.length; i++) {
            var pathEl = pathEls[i];
            var offset = anime.setDashoffset(pathEl);
            pathEl.setAttribute('stroke-dashoffset', offset);
            anime({
                targets: pathEl,
                strokeDashoffset: [offset, 0],
                duration: anime.random(500, 1500),
                delay: anime.random(500, 1000),
                endDelay: 1000,
                direction: 'alternate',
                easing: 'easeInOutSine',
                autoplay: true,
                
            });
        }
    }
    componentDidUpdate(prevProps,prevState){
        if(this.state.renderIntro !== prevState.renderIntro){
            
            var pathEls = document.querySelectorAll('path');
            console.log("start")
            // for (var i = 0; i < pathEls.length; i++) {
            //     var pathEl = pathEls[i];
            //     var offset = anime.setDashoffset(pathEl);
            //     pathEl.setAttribute('stroke-dashoffset', offset);
            //     anime({
            //         targets: pathEl,
            //         strokeDashoffset: [offset, 0],
            //         duration: anime.random(500, 1500),
            //         delay: anime.random(500, 1000),
            //         loop: false,
            //         direction: 'reverse',
            //         easing: 'easeInOutSine',
            //         autoplay: true,
            //     });
            // }
        }
    }
    render(){
        return(
            <div className="welcome">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 800"><g fill="none" fill-rule="evenodd">
                    <path stroke="#31B495" d="M333.468,279.772v20.306h23.474v-20.306h6.336v48.532h-6.336v-22.754h-23.474v22.754h-6.264v-48.532H333.468z"/>
                    <path stroke="#31B495" d="M399.277,305.551h-18.866v17.498h21.026v5.256h-27.29v-48.532h26.21v5.256h-19.946v15.337h18.866V305.551z"/>
                    <path stroke="#31B495" d="M409.57,279.772h6.264v43.276h20.738v5.256H409.57V279.772z"/>
                    <path stroke="#31B495" d="M443.553,279.772h6.264v43.276h20.738v5.256h-27.002V279.772z"/>
                    <path stroke="#31B495" d="M516.205,303.535c0,16.706-10.153,25.562-22.539,25.562c-12.817,0-21.818-9.937-21.818-24.626
                        c0-15.409,9.577-25.49,22.538-25.49C507.636,278.98,516.205,289.133,516.205,303.535z M478.545,304.327
                        c0,10.369,5.617,19.658,15.481,19.658c9.937,0,15.553-9.145,15.553-20.162c0-9.649-5.04-19.73-15.481-19.73
                        C483.729,284.093,478.545,293.67,478.545,304.327z"/>
                    <path stroke="#31B495" d="M545.865,285.101h-14.761v-5.329h35.931v5.329h-14.833v43.204h-6.337V285.101z"/>
                    <path stroke="#31B495" d="M578.697,279.772v20.306h23.474v-20.306h6.337v48.532h-6.337v-22.754h-23.474v22.754h-6.265v-48.532H578.697z"/>
                    <path stroke="#31B495" d="M644.506,305.551h-18.865v17.498h21.025v5.256h-27.289v-48.532h26.209v5.256h-19.945v15.337h18.865V305.551z"/>
                    <path stroke="#31B495" d="M654.799,280.42c3.168-0.648,7.705-1.008,12.025-1.008c6.697,0,11.018,1.224,14.041,3.96
                        c2.448,2.16,3.816,5.472,3.816,9.217c0,6.408-4.032,10.657-9.145,12.385v0.216c3.744,1.296,5.977,4.752,7.129,9.792
                        c1.584,6.769,2.736,11.449,3.744,13.321h-6.48c-0.793-1.368-1.873-5.544-3.24-11.593c-1.44-6.697-4.033-9.217-9.721-9.433h-5.905
                        v21.026h-6.265V280.42z M661.063,302.526h6.409c6.696,0,10.944-3.672,10.944-9.217c0-6.265-4.536-9-11.161-9.073
                        c-3.023,0-5.184,0.288-6.192,0.576V302.526z"/>
                    <path stroke="#31B495" d="M718.665,305.551h-18.866v17.498h21.026v5.256h-27.29v-48.532h26.21v5.256h-19.946v15.337h18.866V305.551z"/>
                    <path stroke="#31B495" d="M458.603,399.439l-5.041,15.266h-6.48l16.489-48.533h7.561l16.562,48.533h-6.697l-5.184-15.266H458.603z M474.516,394.543
                        l-4.752-13.969c-1.08-3.168-1.8-6.049-2.52-8.857H467.1c-0.72,2.88-1.512,5.833-2.448,8.785l-4.752,14.042H474.516z"/>
                    <path stroke="#31B495" d="M494.818,414.705v-48.533h6.84l15.553,24.554c3.601,5.688,6.409,10.801,8.713,15.77l0.144-0.072
                        c-0.576-6.48-0.72-12.385-0.72-19.945v-20.306h5.905v48.533h-6.337l-15.41-24.627c-3.384-5.4-6.625-10.945-9.073-16.201
                        l-0.216,0.072c0.36,6.121,0.504,11.953,0.504,20.018v20.738H494.818z"/>
                    <path stroke="#31B495" d="M542.193,366.82c3.816-0.576,8.354-1.008,13.321-1.008c9.001,0,15.409,2.088,19.657,6.048
                        c4.32,3.96,6.842,9.577,6.842,17.426c0,7.92-2.449,14.4-6.985,18.865c-4.536,4.536-12.024,6.984-21.458,6.984
                        c-4.464,0-8.209-0.217-11.377-0.576V366.82z M548.458,409.736c1.585,0.288,3.889,0.359,6.337,0.359
                        c13.393,0,20.666-7.488,20.666-20.594c0.072-11.449-6.409-18.721-19.658-18.721c-3.24,0-5.688,0.288-7.345,0.648V409.736z"/>
                    <path stroke="#31B495" d="M373.032,501.104l-12.313-48.532h6.625l5.761,24.554c1.44,6.049,2.736,12.098,3.6,16.778h0.144
                        c0.792-4.825,2.304-10.585,3.96-16.85l6.48-24.482h6.553l5.904,24.626c1.368,5.761,2.664,11.521,3.384,16.634h0.144
                        c1.008-5.329,2.376-10.729,3.888-16.777l6.409-24.482h6.409l-13.753,48.532h-6.552l-6.121-25.274
                        c-1.512-6.192-2.521-10.945-3.168-15.842h-0.144c-0.864,4.825-1.944,9.578-3.744,15.842l-6.913,25.274H373.032z"/>
                    <path stroke="#31B495" d="M451.153,478.351h-18.866v17.497h21.026v5.257h-27.29v-48.532h26.21v5.256h-19.946v15.338h18.866V478.351z"/>
                    <path stroke="#31B495" d="M461.446,452.572h6.264v43.275h20.738v5.257h-27.002V452.572z"/>
                    <path stroke="#31B495" d="M526.537,499.521c-2.305,1.152-6.913,2.304-12.817,2.304c-13.681,0-23.978-8.641-23.978-24.554
                        c0-15.193,10.297-25.49,25.346-25.49c6.049,0,9.865,1.296,11.521,2.16l-1.513,5.112c-2.376-1.152-5.761-2.016-9.793-2.016
                        c-11.377,0-18.938,7.271-18.938,20.018c0,11.881,6.841,19.514,18.649,19.514c3.816,0,7.705-0.792,10.225-2.017L526.537,499.521z"/>
                    <path stroke="#31B495" d="M574.345,476.334c0,16.706-10.153,25.563-22.538,25.563c-12.817,0-21.818-9.937-21.818-24.626
                        c0-15.409,9.577-25.49,22.539-25.49C565.775,451.78,574.345,461.934,574.345,476.334z M536.686,477.126
                        c0,10.369,5.616,19.658,15.48,19.658c9.938,0,15.555-9.145,15.555-20.162c0-9.648-5.041-19.729-15.482-19.729
                        C541.869,456.893,536.686,466.47,536.686,477.126z"/>
                    <path stroke="#31B495" d="M623.377,479.791c-0.36-6.769-0.793-14.906-0.721-20.954h-0.216c-1.656,5.688-3.673,11.737-6.12,18.434l-8.569,23.546
                        h-4.753l-7.848-23.114c-2.305-6.841-4.249-13.104-5.617-18.865h-0.144c-0.144,6.048-0.505,14.186-0.937,21.458l-1.296,20.81h-5.977
                        l3.384-48.532h7.993l8.28,23.474c2.017,5.977,3.673,11.306,4.896,16.346h0.217c1.224-4.896,2.952-10.225,5.112-16.346l8.641-23.474
                        h7.993l3.023,48.532h-6.12L623.377,479.791z"/>
                    <path stroke="#31B495" d="M665.494,478.351h-18.866v17.497h21.026v5.257h-27.291v-48.532h26.211v5.256h-19.946v15.338h18.866V478.351z"/>
                </g>
                </svg>
            </div>
        );
    }

}
export default hot(module)(Intro);